####
# Generated by Chef. Do not edit
#  This file contains all objects required for hw monitoring
# RAID support <%= @raid ? "on": "off" %>
# IPMI support <%= @ipmi ? "on": "off" %>


define hostgroup {
  hostgroup_name hw_monitor_hostgroup
  alias all
  members *
}

<% if @ipmi %>

define service {
   hostgroup_name hw_monitor_hostgroup
   display_name  IPMI sensors
   service_description monitor IPMI sensors for abnormal readings
   check_command check-ipmi-sensors
   use default-service
}

define command {
  command_name    check-ipmi-sensors
  command_line    $USER1$/check_nrpe -H $HOSTADDRESS$ -c check_ipmi_sensors -t 40
}
<% end %>


<% if @raid %>
### 
# the appropriate check_* for the hw present in the machine is configured on each node
define service {
   hostgroup_name hw_monitor_hostgroup
   display_name  RAID status
   service_description monitor RAID controllers for abnormal conditions
   check_command check-raid
   use default-service
}


define command {
  command_name    check-raid
  command_line    $USER1$/check_nrpe -H $HOSTADDRESS$ -c check_raid -t 40
}

<% end %>